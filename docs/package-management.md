# Package Management

Nix can manage packages, package names can be found via

https://search.nixos.org/

Ideally we would have Nix as a single package manager with packages installed at the user-level where possiblem and system level where appropriate.

## Mac OS - GUI Packages

### Homebrew - System

Some apps are just not available for your Mac, for various reasons
- They cannot be located in  [NixPkgs](https://search.nixos.org/ )
- There are only derivations for a different platform/OS (i.e 86x64 or Linux)
- The app, when installed and executed, errors or fails on launch.

The solution to these issues, is to use Homebrew as an installer. Apps installed via Homebrew, are installed on a system-level basis.
This includes Mac App Store packages installed via Homebrew.

### Nix Apps

Apps that can be run by Nix, will be installed via Nix.

Apps that are installed via Nix without additional configuration also have limitations. Nix installs packages in `/nix/store/` via symlinking to the `/Applications` and `~/Applications` paths.

- Spotlight does not index symlinks or aliases which Nix uses to map to its store. Therefore you cannot launch for Spotlight
- Ditto with launchpad

### Mac App Util

mac-app-util solves the problem of symlinks/alias by creating a launcher (called trampoline) app that opens the target Nix app.
- These launcher apps are created inside `/Applications/Nix Trampolines/` which should match Nix packages `/Applications/Nix Trampolines/`

- see [repo](https://github.com/hraban/mac-app-util)

Known Issues
- currently known issue include Home Manager Nix apps found in `~/Applications/Home Manager Apps/` - trampolines are not auto-generated by mac-app-util in the current configuration.

----

## CLI Packages

All CLI packages appear to be available via nixpkgs, they can be installed at

- host-level if they are daemons, require sudo, or system tools at `nix/hosts/{host}/packages/system-pkgs.nix`
- user-level at `../users/{user}/packages/user-pkgs.nix`

----
